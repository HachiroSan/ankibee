(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{4378:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return r(5420)}])},5420:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return HomePage}});var t=r(4246),s=r(7378),l=r(8038),o=r.n(l),i=r(1038),n=r(8579),d=r.n(n),c=r(9868),u=r(6540);let h=(0,u.Z)("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);var m=r(4356),x=r(9353),p=r(7002);function ExportDialog(e){let{isOpen:a,onClose:r,deckName:l,cardCount:o,cards:n}=e,[d,u]=s.useState(!1),[h,f]=s.useState(l),[g,y]=s.useState(null);s.useEffect(()=>{a&&(f(l),y(null),validateCards())},[a,l]);let validateCards=()=>{if(0===n.length)return y("No cards to export. Add some cards first."),!1;let e=n.filter(e=>{var a,r;return!(null===(a=e.word)||void 0===a?void 0:a.trim())||!(null===(r=e.definition)||void 0===r?void 0:r.trim())||!e.audioData&&!e.audioPath});if(e.length>0){let a=e.map(e=>e.word||"Unnamed card").join(", ");y("Some cards are incomplete and will be skipped: ".concat(a))}else y(null);return!0},handleExport=async()=>{try{if(!h.trim()){i.Am.error("Please enter a deck name");return}if(!validateCards())return;u(!0);let e=n.filter(e=>{var a,r;return(null===(a=e.word)||void 0===a?void 0:a.trim())&&(null===(r=e.definition)||void 0===r?void 0:r.trim())&&(e.audioData||e.audioPath)});if(0===e.length){i.Am.error("No valid cards to export",{description:"Each card must have a word, definition, and audio."});return}let a=await window.electron.exportToAnki({cards:e,deckName:h.trim()});if(a.success)i.Am.success("Deck exported successfully!",{description:"Saved to: ".concat(a.filePath)}),r();else throw Error("Export failed")}catch(e){console.error("Export failed:",e),i.Am.error("Failed to export deck",{description:e instanceof Error?e.message:"Unknown error occurred"})}finally{u(!1)}};return(0,t.jsx)(m.Vq,{open:a,onOpenChange:r,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsx)(m.$N,{children:"Export to Anki"}),(0,t.jsx)(m.Be,{children:"Export your deck to an Anki package (.apkg) file. Only cards with a word, definition, and audio will be exported."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{htmlFor:"deckName",children:"Deck Name"}),(0,t.jsx)(x.I,{id:"deckName",value:h,onChange:e=>f(e.target.value),placeholder:"Enter deck name",disabled:d})]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("p",{className:"text-muted-foreground",children:[o," cards in deck"]}),g&&(0,t.jsxs)("p",{className:"text-yellow-600 dark:text-yellow-400 mt-2",children:["⚠️ ",g]})]})]}),(0,t.jsxs)(m.cN,{children:[(0,t.jsx)(c.z,{variant:"outline",onClick:r,disabled:d,children:"Cancel"}),(0,t.jsx)(c.z,{onClick:handleExport,disabled:d||!h.trim()||0===n.length,children:d?"Exporting...":"Export"})]})]})})}let f=(0,u.Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),g=(0,u.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),y=(0,u.Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),j=(0,u.Z)("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);var v=r(6013);let w=(0,u.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var k=r(3873),N=r(2609),A=r(3392),b="horizontal",C=["horizontal","vertical"],D=s.forwardRef((e,a)=>{let{decorative:r,orientation:s=b,...l}=e,o=C.includes(s)?s:b;return(0,t.jsx)(A.WV.div,{"data-orientation":o,...r?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...l,ref:a})});D.displayName="Separator";var E=r(7413);let S=s.forwardRef((e,a)=>{let{className:r,orientation:s="horizontal",decorative:l=!0,...o}=e;return(0,t.jsx)(D,{ref:a,decorative:l,orientation:s,className:(0,E.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...o})});function SettingsDialog(e){let{theme:a,autoLowercase:r,onThemeChange:l,onAutoLowercaseChange:o}=e,[i,n]=(0,s.useState)(!1),handleCheckUpdate=async()=>{n(!0);try{await window.electron.checkForUpdates()}finally{n(!1)}};return(0,t.jsxs)(m.Vq,{children:[(0,t.jsx)(m.hg,{asChild:!0,children:(0,t.jsxs)(c.z,{variant:"outline",size:"icon",className:"gradio-button h-9 w-9",children:[(0,t.jsx)(j,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Settings"})]})}),(0,t.jsxs)(m.cZ,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsx)(m.$N,{children:"Settings"}),(0,t.jsx)(m.Be,{children:"Customize your app preferences. Changes are saved automatically."})]}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{htmlFor:"theme",children:"Theme"}),(0,t.jsxs)(N.Ph,{value:a,onValueChange:e=>l(e),children:[(0,t.jsx)(N.i4,{id:"theme",className:"w-full",children:(0,t.jsx)(N.ki,{placeholder:"Select theme"})}),(0,t.jsxs)(N.Bw,{children:[(0,t.jsx)(N.Ql,{value:"light",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Light"})]})}),(0,t.jsx)(N.Ql,{value:"dark",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Dark"})]})}),(0,t.jsx)(N.Ql,{value:"system",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"System"})]})})]})]}),(0,t.jsx)("p",{className:"text-[0.8rem] text-muted-foreground",children:"Choose your preferred theme appearance."})]}),(0,t.jsx)(S,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(p._,{htmlFor:"auto-lowercase",children:"Auto Lowercase"}),(0,t.jsx)(k.r,{id:"auto-lowercase",checked:r,onCheckedChange:o})]}),(0,t.jsx)("p",{className:"text-[0.8rem] text-muted-foreground",children:"Automatically convert words to lowercase when adding to deck."})]}),(0,t.jsx)(S,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p._,{children:"Updates"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-[0.8rem] text-muted-foreground",children:"Check if a new version is available"}),(0,t.jsxs)(c.z,{variant:"outline",size:"sm",onClick:handleCheckUpdate,disabled:i,className:"relative",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 mr-2 ".concat(i?"animate-spin":"")}),"Check for Updates"]})]})]}),(0,t.jsx)(S,{}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-center space-y-2 py-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:["Made with ",(0,t.jsx)(w,{className:"h-3 w-3 fill-current text-red-500"})," by"]}),(0,t.jsx)("div",{className:"text-sm font-medium",children:(0,t.jsx)("a",{href:"https://farhad.my",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Hachiro"})}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Version 1.0.1"})]})})]})]})]})}S.displayName=D.displayName;var R=r(4236);function DeckHeader(e){let{cardsCount:a,isLoading:r,cards:l,theme:o,autoLowercase:i,onThemeChange:n,onAutoLowercaseChange:u}=e,[m,x]=s.useState(!1);return(0,t.jsx)(R.pn,{children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 pl-6",children:[(0,t.jsx)(d(),{src:"/images/logo.png",alt:"AnkiBee Logo",width:64,height:64,className:"shrink-0"}),(0,t.jsx)("div",{className:"min-w-[300px]",children:(0,t.jsx)("h1",{className:"text-xl font-bold",children:"AnkiBee - Spelling Bee Deck Maker for Anki"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[(0,t.jsxs)(R.u,{children:[(0,t.jsx)(R.aJ,{asChild:!0,children:(0,t.jsx)("div",{children:(0,t.jsx)(SettingsDialog,{theme:o,autoLowercase:i,onThemeChange:n,onAutoLowercaseChange:u})})}),(0,t.jsx)(R._v,{children:(0,t.jsx)("p",{children:"Configure application settings"})})]}),(0,t.jsxs)(R.u,{children:[(0,t.jsx)(R.aJ,{asChild:!0,children:(0,t.jsxs)(c.z,{variant:"outline",onClick:()=>x(!0),disabled:r,className:"gradio-button flex-1 sm:flex-none",children:[(0,t.jsx)(h,{className:"h-4 w-4 mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Export to Anki"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Export"})]})}),(0,t.jsx)(R._v,{children:(0,t.jsx)("p",{children:"Export your deck to Anki format"})})]})]}),(0,t.jsx)(ExportDialog,{isOpen:m,onClose:()=>x(!1),deckName:"AnkiBee Deck",cardCount:a,cards:l})]})})}var L=r(2129),P=r(1374),z=r(3217),_=r(3958),F=r(2921),B=r(5294),M=r(6949),Z=r(4315),T="AlertDialog",[H,O]=(0,_.b)(T,[B.p8]),U=(0,B.p8)(),AlertDialog=e=>{let{__scopeAlertDialog:a,...r}=e,s=U(a);return(0,t.jsx)(B.fC,{...s,...r,modal:!0})};AlertDialog.displayName=T;var q=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=U(r);return(0,t.jsx)(B.xz,{...l,...s,ref:a})});q.displayName="AlertDialogTrigger";var AlertDialogPortal=e=>{let{__scopeAlertDialog:a,...r}=e,s=U(a);return(0,t.jsx)(B.h_,{...s,...r})};AlertDialogPortal.displayName="AlertDialogPortal";var V=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=U(r);return(0,t.jsx)(B.aV,{...l,...s,ref:a})});V.displayName="AlertDialogOverlay";var W="AlertDialogContent",[$,I]=H(W),J=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,children:l,...o}=e,i=U(r),n=s.useRef(null),d=(0,F.e)(a,n),c=s.useRef(null);return(0,t.jsx)(B.jm,{contentName:W,titleName:Q,docsSlug:"alert-dialog",children:(0,t.jsx)($,{scope:r,cancelRef:c,children:(0,t.jsxs)(B.VY,{role:"alertdialog",...i,...o,ref:d,onOpenAutoFocus:(0,M.M)(o.onOpenAutoFocus,e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(Z.A4,{children:l}),(0,t.jsx)(DescriptionWarning,{contentRef:n})]})})})});J.displayName=W;var Q="AlertDialogTitle",K=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=U(r);return(0,t.jsx)(B.Dx,{...l,...s,ref:a})});K.displayName=Q;var X="AlertDialogDescription",Y=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=U(r);return(0,t.jsx)(B.dk,{...l,...s,ref:a})});Y.displayName=X,s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=U(r);return(0,t.jsx)(B.x8,{...l,...s,ref:a})}).displayName="AlertDialogAction";var G="AlertDialogCancel",ee=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,{cancelRef:l}=I(G,r),o=U(r),i=(0,F.e)(a,l);return(0,t.jsx)(B.x8,{...o,...s,ref:i})});ee.displayName=G;var DescriptionWarning=({contentRef:e})=>{let a=`\`${W}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${W}\` by passing a \`${X}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${W}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return s.useEffect(()=>{let r=document.getElementById(e.current?.getAttribute("aria-describedby"));r||console.warn(a)},[a,e]),null};let ea=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(V,{className:(0,E.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:a})});ea.displayName=V.displayName;let er=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsxs)(AlertDialogPortal,{children:[(0,t.jsx)(ea,{}),(0,t.jsx)(J,{ref:a,className:(0,E.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});er.displayName=J.displayName;let AlertDialogHeader=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,E.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...r})};AlertDialogHeader.displayName="AlertDialogHeader";let AlertDialogFooter=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,E.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...r})};AlertDialogFooter.displayName="AlertDialogFooter";let et=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(K,{ref:a,className:(0,E.cn)("text-lg font-semibold",r),...s})});et.displayName=K.displayName;let es=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(Y,{ref:a,className:(0,E.cn)("text-sm text-muted-foreground",r),...s})});es.displayName=Y.displayName;let el=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("button",{ref:a,className:(0,E.cn)((0,c.d)(),r),...s})});el.displayName="AlertDialogAction";let eo=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(ee,{ref:a,className:(0,E.cn)((0,c.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});function DeckPreview(e){let{cards:a,onRemoveCard:r,onPlayAudio:l,onEditCard:o,onClearDeck:n,isLoading:d,autoLowercase:u}=e,[h,m]=(0,s.useState)(!1);return(0,t.jsx)(R.pn,{children:(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-base font-medium",children:"Deck Preview"}),(0,t.jsxs)(AlertDialog,{open:h,onOpenChange:m,children:[(0,t.jsxs)(R.u,{children:[(0,t.jsx)(R.aJ,{asChild:!0,children:(0,t.jsx)(q,{asChild:!0,children:(0,t.jsxs)(c.z,{variant:"outline",size:"sm",disabled:0===a.length||d,className:"gradio-button h-7 text-xs",children:[(0,t.jsx)(P.Z,{className:"h-3 w-3 mr-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Clear All"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Clear"})]})})}),(0,t.jsx)(R._v,{children:(0,t.jsx)("p",{children:"Remove all cards from your deck"})})]}),(0,t.jsxs)(er,{children:[(0,t.jsxs)(AlertDialogHeader,{children:[(0,t.jsx)(et,{children:"Clear All Cards"}),(0,t.jsxs)(es,{children:["This action cannot be undone. This will permanently delete all ",a.length," cards from your deck."]})]}),(0,t.jsxs)(AlertDialogFooter,{children:[(0,t.jsx)(eo,{children:"Cancel"}),(0,t.jsx)(el,{onClick:()=>{n(),m(!1),i.Am.success("Deck Cleared",{description:"All cards have been removed."})},children:"Continue"})]})]})]})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0",children:(0,t.jsx)(z.C,{cards:a,onRemoveCard:r,onPlayAudio:l,onEditCard:o,isLoading:d,autoLowercase:u})})]})})}eo.displayName=ee.displayName;var ei=r(5289),en=r(1148);function HomePage(e){let{autoLowercase:a=!0}=e,[r,l]=(0,s.useState)([]),[n,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),h=s.useRef(null),[m,x]=(0,s.useState)("system"),[p,f]=(0,s.useState)(a);(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e&&handleThemeChange(e)},[]),(0,s.useEffect)(()=>{let loadSavedDeck=async()=>{try{let e=await window.electron.loadDeck();if(e){let a=await Promise.all(e.cards.map(async e=>{if("custom"===e.audioSource)return e;if(e.audioRegion&&("google-us"===e.audioSource||"google-uk"===e.audioSource))try{let a=await window.electron.fetchAudio(e.word,e.audioRegion);if(a)return{...e,audioData:a};console.warn("No audio data found for ".concat(e.word))}catch(a){console.error("Failed to load audio for ".concat(e.word,":"),a)}return e}));l(a),i.Am.success("Deck loaded",{description:"Loaded ".concat(a.length," cards")})}}catch(e){console.error("Error loading deck:",e),i.Am.error("Failed to load saved deck",{description:e instanceof Error?e.message:"An unexpected error occurred"})}};loadSavedDeck()},[]),(0,s.useEffect)(()=>{let saveDeck=async()=>{try{let e=await window.electron.saveDeck({cards:r,name:"AnkiBee Deck"});if(!e)throw Error("Failed to save deck")}catch(e){console.error("Error saving deck:",e),i.Am.error("Failed to save deck",{description:e instanceof Error?e.message:"An unexpected error occurred"})}};r.length>0&&saveDeck()},[r]),(0,s.useEffect)(()=>{if(h.current&&!c){let e=en.Z.create({container:h.current,waveColor:"rgb(124, 58, 237)",progressColor:"rgb(139, 92, 246)",height:0,interact:!1,cursorWidth:0,backend:"WebAudio",hideScrollbar:!0});return e.on("loading",e=>{console.log("Loading audio:",e+"%")}),e.on("ready",()=>{console.log("Audio ready to play")}),e.on("error",e=>{console.error("WaveSurfer error:",e),i.Am.error("Error loading audio")}),u(e),()=>e.destroy()}},[]);let handleAddCard=async(e,a,t,s)=>{let o,n;d(!0);let c=!0===p?e.toLowerCase():e;try{let e=r.some(e=>e.word.toLowerCase()===c.toLowerCase());if(e){i.Am.error("Duplicate Word",{description:'"'.concat(c,'" already exists in your deck')}),d(!1);return}if("custom"===s){if(!t)throw Error("Please select an audio file first");o=await t.arrayBuffer()}else if("google-us"===s||"google-uk"===s){n="google-us"===s?"us":"gb";let e=await (0,ei.R$)(c,n);o=e||void 0}if(!o)throw Error(n?"No ".concat(n.toUpperCase(),' pronunciation available for "').concat(c,'"'):"No audio data available");let u=Date.now(),h={id:String(u),word:c,definition:a,audioData:o,audioRegion:n,audioSource:s,createdAt:u,updatedAt:u};l([...r,h]),i.Am.success("Card Added",{description:'Added "'.concat(c,'" with ').concat("google-us"===s?"US":"google-uk"===s?"GB":"custom"," pronunciation")})}catch(e){i.Am.error("Failed to add card",{description:e instanceof Error?e.message:"An unexpected error occurred"}),console.error("Error adding card:",e)}finally{d(!1)}},handlePlayAudio=async e=>{if(c)try{let a=new Blob([e],{type:"audio/mp3"});await c.loadBlob(a),await new Promise((e,a)=>{let onReady=()=>{c.un("ready",onReady),c.un("error",onError),e()},onError=e=>{c.un("ready",onReady),c.un("error",onError),a(e)};c.on("ready",onReady),c.on("error",onError)}),await c.play()}catch(e){console.error("Error playing audio:",e),i.Am.error("Error",{description:"Failed to play audio"})}},handleBatchAdd=async e=>{try{let a=Date.now();for(let{word:t,definition:s,audioData:o,audioSource:i}of e){let e=r.some(e=>e.word.toLowerCase()===t.toLowerCase());if(e){console.log('Skipped "'.concat(t,'": Already exists in deck'));continue}l(e=>[...e,{id:String(Date.now()+Math.random()),word:t,definition:s||"",audioData:o,audioRegion:"google-us"===i?"us":"google-uk"===i?"gb":void 0,createdAt:a,updatedAt:a}])}}catch(e){console.error("Error in batch add:",e),i.Am.error("Failed to add some cards",{description:e instanceof Error?e.message:"An unexpected error occurred"})}},handleThemeChange=e=>{x(e);let a=window.document.documentElement;if(a.classList.remove("light","dark"),"system"===e){let e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";a.classList.add(e)}else a.classList.add(e);localStorage.setItem("theme",e)};return(0,t.jsxs)("div",{className:"absolute inset-x-0 bottom-0 top-8 flex flex-col overflow-hidden",children:[(0,t.jsx)(o(),{children:(0,t.jsx)("title",{children:"Ankibee - Spelling Bee Deck Maker"})}),(0,t.jsx)("div",{ref:h,style:{display:"none"}}),(0,t.jsx)("div",{className:"flex-none px-6 pb-4 pt-6",children:(0,t.jsx)(DeckHeader,{cardsCount:r.length,isLoading:n,cards:r,theme:m,autoLowercase:p,onThemeChange:handleThemeChange,onAutoLowercaseChange:e=>{f(e)}})}),(0,t.jsx)("div",{className:"flex-1 min-h-0 px-6 pt-4",children:(0,t.jsxs)("div",{className:"h-full grid grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"overflow-y-auto",children:(0,t.jsx)("div",{className:"pr-6 pb-16",children:(0,t.jsx)(L.a,{onSubmit:handleAddCard,onBatchSubmit:handleBatchAdd,isLoading:n,autoLowercase:p,existingCards:r})})}),(0,t.jsx)("div",{className:"overflow-y-auto",children:(0,t.jsx)("div",{className:"pr-6 pb-16 pt-1",children:(0,t.jsx)(DeckPreview,{cards:r,onRemoveCard:e=>l(r.filter(a=>a.id!==e)),onPlayAudio:handlePlayAudio,onEditCard:e=>{l(r.map(a=>a.id===e.id?e:a)),i.Am.success("Card Updated",{description:'Updated "'.concat(e.word,'" successfully')})},onClearDeck:()=>l([]),isLoading:n,autoLowercase:p})})})]})})]})}}},function(e){e.O(0,[552,901,494,872,987,774,888,179],function(){return e(e.s=4378)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{7869:function(a,e,d){(window.__NEXT_P=window.__NEXT_P||[]).push(["/deck/[id]",function(){return d(8249)}])},8249:function(a,e,d){"use strict";d.r(e),d.d(e,{default:function(){return DeckPage}});var r=d(4246),c=d(7378),o=d(6677),t=d(3217),s=d(2129),n=d(5289),i=d(1038);function DeckPage(a){let{autoLowercase:e=!0}=a,d=(0,o.useRouter)(),{id:u}=d.query,[l,f]=(0,c.useState)(null),[h,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let loadDeck=async()=>{if(u){w(!0);try{let a=await window.electron.loadDeck();f({cards:(null==a?void 0:a.cards)||[],settings:{autoLowercase:e}})}catch(a){console.error("Error loading deck:",a),i.Am.error("Failed to load deck")}finally{w(!1)}}};loadDeck()},[u,e]);let handleAddCard=async(a,e,d,r)=>{if(l)try{let c=Date.now(),o={id:String(c),word:a,definition:e,audioSource:r,createdAt:c,updatedAt:c};if(d){let a=await d.arrayBuffer();o.audioData=a}f({...l,cards:[...l.cards,o]}),i.Am.success("Card added successfully")}catch(a){console.error("Error adding card:",a),i.Am.error("Failed to add card")}},handleBatchAdd=async a=>{if(l)try{let e=Date.now(),d=a.map((a,d)=>({id:String(e+d),word:a.word,definition:a.definition||"",audioData:a.audioData,audioSource:a.audioSource||"none",createdAt:e,updatedAt:e}));f({...l,cards:[...l.cards,...d]}),i.Am.success("Added ".concat(d.length," cards successfully"))}catch(a){console.error("Error adding cards:",a),i.Am.error("Failed to add cards")}},handleRemoveCard=async a=>{l&&(f({...l,cards:l.cards.filter(e=>e.id!==a)}),i.Am.success("Card removed"))},handlePlayAudio=async a=>{try{await (0,n.Sk)("deck-page")}catch(a){console.error("Error playing audio:",a),i.Am.error("Failed to play audio")}};return l?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(s.a,{onSubmit:handleAddCard,onBatchSubmit:handleBatchAdd,isLoading:h,autoLowercase:l.settings.autoLowercase,existingCards:l.cards}),(0,r.jsx)(t.C,{cards:l.cards,onRemoveCard:handleRemoveCard,onPlayAudio:handlePlayAudio,onEditCard:a=>{l&&(f({...l,cards:l.cards.map(e=>e.id===a.id?a:e)}),i.Am.success("Card updated"))},isLoading:h,autoLowercase:l.settings.autoLowercase})]}):(0,r.jsx)("div",{children:"Loading..."})}},6677:function(a,e,d){a.exports=d(6250)}},function(a){a.O(0,[552,901,494,987,774,888,179],function(){return a(a.s=7869)}),_N_E=a.O()}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{2129:function(e,a,s){s.d(a,{a:function(){return AddCardForm}});var i=s(4246),t=s(7378),r=s(2685),n=s(9868),o=s(9353),l=s(946),d=s(2923),c=s(2437),u=s(4348),m=s(6013),h=s(1374),x=s(876),f=s(1888),p=s(1503),j=s(9037),g=s(5289),v=s(1038),N=s(3873),y=s(7002),w=s(2609),b=s(7311),A=s(8228);function BatchAddForm(e){let{onSubmit:a,isLoading:s,autoLowercase:r,existingCards:o}=e,[d,c]=(0,t.useState)(""),[u,h]=(0,t.useState)("none"),[x,f]=(0,t.useState)(!1),[j,C]=(0,t.useState)(!1),[k,S]=(0,t.useState)(!1),handleSubmit=async e=>{if(e.preventDefault(),!d.trim()){v.Am.error("Please enter some words");return}S(!0);let s=d.split("\n").filter(e=>e.trim()),i=[],t=[],n=new Set,l=[];o.forEach(e=>n.add(e.word.toLowerCase()));let m=v.Am.loading("Starting batch processing...",{duration:1/0});try{let e=s.length;for(let a=0;a<s.length;a++){let o=s[a],d=!0===r?o.trim().toLowerCase():o.trim();if(n.has(d.toLowerCase())){l.push(d),t.push('Skipped "'.concat(d,'": Word already exists')),v.Am.error("Skipped duplicate word",{description:'"'.concat(d,'" already exists in the deck'),duration:2e3}),v.Am.loading("Processing words",{id:m,description:"Word ".concat(a+1," of ").concat(e," (Skipped duplicate)")});continue}v.Am.loading('Processing "'.concat(d,'"'),{id:m,description:"Word ".concat(a+1," of ").concat(e)});try{let e,a;if(!x)try{let a=await (0,g.sL)(d);e=a||void 0,a?v.Am.success('Definition found for "'.concat(d,'"'),{duration:1500}):v.Am.error('No definition found for "'.concat(d,'"'),{duration:1500})}catch(e){console.error("Error fetching definition:",e),v.Am.error('Failed to fetch definition for "'.concat(d,'"'),{duration:1500})}if(!j&&"none"!==u)try{let e="google-us"===u?"us":"gb",s=await (0,g.R$)(d,e);a=s||void 0,s?v.Am.success('Audio fetched for "'.concat(d,'"'),{duration:1500}):v.Am.error('No audio found for "'.concat(d,'"'),{duration:1500})}catch(e){if(j){t.push('Skipped "'.concat(d,'": No audio available'));continue}}n.add(d.toLowerCase()),i.push({word:d,definition:e,audioData:a,audioSource:a?u:"none"})}catch(e){t.push('Failed to process "'.concat(d,'": ').concat(e instanceof Error?e.message:"Unknown error")),v.Am.error('Failed to process "'.concat(d,'"'),{description:e instanceof Error?e.message:"Unknown error",duration:3e3})}}if(v.Am.dismiss(m),i.length>0||l.length>0){let e=[];i.length>0&&e.push("Added ".concat(i.length," card").concat(i.length>1?"s":"")),l.length>0&&e.push("Skipped ".concat(l.length," duplicate").concat(l.length>1?"s":"")),v.Am.success("Batch Processing Complete",{description:e.join(", "),duration:4e3}),i.length>0&&(a(i),c(""))}else v.Am.error("No cards were added",{description:"All words were skipped due to missing requirements"});t.length>0&&console.log("Batch processing errors:",t)}catch(e){v.Am.dismiss(m),v.Am.error("Failed to process words",{description:e instanceof Error?e.message:"An unexpected error occurred"})}finally{S(!1)}};return(0,i.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-3",children:[(0,i.jsxs)("div",{className:"space-y-1.5",children:[(0,i.jsx)(y._,{className:"text-xs font-medium",children:"Words"}),(0,i.jsx)(l.g,{placeholder:"Enter words, one per line...",value:d,onChange:e=>c(e.target.value),disabled:s||k,className:"gradio-input min-h-[120px] text-sm"})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"space-y-1.5",children:[(0,i.jsx)(y._,{className:"text-xs font-medium",children:"Audio Source"}),(0,i.jsxs)(w.Ph,{value:u,onValueChange:e=>h(e),disabled:s||k,children:[(0,i.jsx)(w.i4,{className:"gradio-input h-8 text-sm",children:(0,i.jsx)(w.ki,{})}),(0,i.jsxs)(w.Bw,{children:[(0,i.jsx)(w.Ql,{value:"none",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(b.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"No Audio"})]})}),(0,i.jsx)(w.Ql,{value:"google-us",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(p.JM8,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"Google Dictionary - US"})]})}),(0,i.jsx)(w.Ql,{value:"google-uk",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(p.JM8,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"Google Dictionary - GB"})]})})]})]})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(y._,{className:"text-sm",htmlFor:"skip-no-definition",children:"Skip words without definition"}),(0,i.jsx)(N.r,{id:"skip-no-definition",checked:x,onCheckedChange:f,disabled:s||k})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(y._,{className:"text-sm",htmlFor:"skip-no-audio",children:"Skip words without audio"}),(0,i.jsx)(N.r,{id:"skip-no-audio",checked:j,onCheckedChange:C,disabled:s||k||"none"===u})]})]})]}),(0,i.jsx)(n.z,{type:"submit",className:"w-full gradio-button bg-primary hover:bg-primary/90",disabled:s||k||!d.trim(),children:k?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),"Add Cards"]})})]})}var C=s(4236);let LoadingSparkles=()=>(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(r.E.div,{initial:{scale:.5,opacity:0},animate:{scale:[.5,1,.5],opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)(c.Z,{className:"h-3 w-3 text-primary"})}),(0,i.jsx)(r.E.div,{initial:{scale:.5,opacity:0},animate:{scale:[.5,1,.5],opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut",delay:.5},className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)(c.Z,{className:"h-3 w-3 text-primary/60"})}),(0,i.jsx)(c.Z,{className:"h-3 w-3 invisible"})]});function AddCardForm(e){let{onSubmit:a,onBatchSubmit:s,isLoading:c,autoLowercase:b,existingCards:A}=e,[k,S]=(0,t.useState)(""),[F,z]=(0,t.useState)(""),[D,Z]=(0,t.useState)(void 0),[E,P]=(0,t.useState)("google-us"),[B,_]=(0,t.useState)(null),[R,J]=(0,t.useState)(!1),[L,W]=(0,t.useState)(!1),[M,G]=(0,t.useState)(!1),I=t.useRef(null),Q=t.useMemo(()=>"add-card-form",[]),[U,V]=(0,t.useState)(!1);t.useEffect(()=>{(null==B?void 0:B.audioData)&&I.current&&(0,g.dr)(B.audioData,I.current,Q).catch(e=>{console.error("Failed to load waveform:",e),v.Am.error("Failed to load audio preview")})},[B,Q]);let handleSubmit=async e=>{e.preventDefault(),k&&F&&B?(a(k,F,D,B.source),S(""),z(""),Z(void 0),_(null),G(!1)):B?v.Am.error("Please fill in all fields"):v.Am.error("Please fetch and verify audio first")},handleFetchDefinition=async()=>{if(!k.trim()){v.Am.error("Please enter a word first");return}J(!0);let e=!0===b?k.toLowerCase():k,a="fetch-definition-".concat(Date.now());try{v.Am.loading('Finding definition for "'.concat(e,'"...'),{id:a});let s=await (0,g.sL)(e);s?(z(s),v.Am.success('Found definition for "'.concat(e,'"'),{id:a})):v.Am.error('No definition found for "'.concat(e,'"'),{id:a})}catch(e){console.error("Error in handleFetchDefinition:",e),v.Am.error(e instanceof Error?e.message:"Failed to fetch definition",{id:a})}finally{J(!1)}},handleFetchAudio=async()=>{if(!k.trim()){v.Am.error("Please enter a word first");return}W(!0);let e=!0===b?k.toLowerCase():k,a="fetch-audio-".concat(Date.now());try{if("custom"===E){if(!D){v.Am.error("Please select an audio file first");return}v.Am.loading("Processing custom audio...",{id:a});let e=await D.arrayBuffer();_({audioData:e,source:"custom"}),v.Am.success("Audio ready for preview",{id:a})}else{let s="google-us"===E?"us":"gb";v.Am.loading("Fetching ".concat(s.toUpperCase(),' pronunciation for "').concat(e,'"...'),{id:a});let i=await (0,g.R$)(e,s);i?(_({audioData:i,source:E}),v.Am.success("Found ".concat(s.toUpperCase(),' pronunciation for "').concat(e,'"'),{id:a})):v.Am.error("No ".concat(s.toUpperCase(),' pronunciation available for "').concat(e,'"'),{id:a})}}catch(e){console.error("Error in handleFetchAudio:",e),v.Am.error(e instanceof Error?e.message:"Failed to fetch audio",{id:a})}finally{W(!1)}},handlePlayPreview=async()=>{if((null==B?void 0:B.audioData)&&I.current)try{G(!0),await (0,g.Sk)(Q)}catch(e){console.error("Error playing audio:",e),v.Am.error("Failed to play audio")}finally{G(!1)}},handleCustomAudioChange=async e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!s){Z(void 0),_(null);return}if(!s.type.startsWith("audio/")){v.Am.error("Invalid file type",{description:"Please upload an audio file (MP3, WAV, etc.)"}),e.target.value="";return}if(s.size>5242880){v.Am.error("File too large",{description:"Audio file must be less than 5MB"}),e.target.value="";return}W(!0);try{await v.Am.promise((async()=>{let e=await s.arrayBuffer();I.current&&await (0,g.dr)(e,I.current,Q),Z(s),_({audioData:e,source:"custom"})})(),{loading:"Processing audio file...",success:"Audio ready for preview",error:"The selected file could not be processed as audio"})}catch(a){console.error("Error processing custom audio:",a),Z(void 0),_(null),e.target.value=""}finally{W(!1)}};return(0,i.jsx)(C.pn,{children:(0,i.jsxs)(d.Zb,{className:"gradio-card",children:[(0,i.jsx)(d.Ol,{className:"pb-2 px-3 pt-3",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(d.ll,{className:"text-base font-medium",children:"Add New Word"}),(0,i.jsx)(d.SZ,{className:"text-xs",children:"Create a new spelling bee card with word, definition, and audio."})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)(y._,{htmlFor:"batch-mode",className:"text-sm",children:"Batch Mode"})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Switch to batch mode to add multiple words at once"})})]}),(0,i.jsx)(N.r,{id:"batch-mode",checked:U,onCheckedChange:V,disabled:c})]})]})}),(0,i.jsx)(d.aY,{className:"p-3 pt-0",children:U?(0,i.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:(0,i.jsx)(BatchAddForm,{onSubmit:s,isLoading:c,autoLowercase:b,existingCards:A})},"batch"):(0,i.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:(0,i.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-3",children:[(0,i.jsxs)("div",{className:"space-y-1.5",children:[(0,i.jsx)("label",{className:"text-xs font-medium",children:"Word"}),(0,i.jsx)(o.I,{placeholder:"Enter word...",value:k,onChange:e=>{S(e.target.value),_(null)},disabled:c,className:"gradio-input h-8 text-sm"})]}),(0,i.jsxs)("div",{className:"space-y-1.5",children:[(0,i.jsx)("label",{className:"text-xs font-medium",children:"Definition"}),(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)(l.g,{placeholder:"Enter definition...",value:F,onChange:e=>z(e.target.value),disabled:c,className:"gradio-input min-h-[80px] text-sm pr-20 transition-all duration-200 focus:shadow-[0_0_0_1px_rgba(255,136,0,0.1),0_0_0_4px_rgba(255,136,0,0.1)]"}),(0,i.jsx)("div",{className:"absolute right-2 top-2 flex gap-1",children:R?(0,i.jsx)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.15},children:(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsxs)(n.z,{type:"button",variant:"ghost",size:"sm",disabled:!0,className:"h-5 px-2 text-[11px] font-normal text-muted-foreground/40 hover:text-muted-foreground/40 hover:bg-transparent cursor-not-allowed",children:[(0,i.jsx)(LoadingSparkles,{}),(0,i.jsx)("span",{children:"Fetching"})]})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Fetching definition from dictionary"})})]})},"loading"):(0,i.jsx)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.15},children:(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsxs)(n.z,{type:"button",variant:"ghost",size:"sm",onClick:handleFetchDefinition,disabled:c||!k||R,className:"h-5 px-2 text-[11px] font-normal transition-colors relative overflow-hidden\n                                  ".concat(k?"text-muted-foreground hover:text-primary hover:bg-primary/5":"text-muted-foreground/40 hover:text-muted-foreground/40 hover:bg-transparent cursor-not-allowed"),children:[(0,i.jsx)(j.nfF,{className:"h-3 w-3"}),(0,i.jsx)("span",{children:"Fetch"})]})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Automatically fetch definition from dictionary"})})]})},"button")})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("label",{className:"text-xs font-medium",children:"Audio Source"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(w.Ph,{value:E,onValueChange:e=>{P(e),_(null),"custom"!==e&&Z(void 0)},children:[(0,i.jsx)(w.i4,{className:"gradio-input h-8 text-sm",children:(0,i.jsx)(w.ki,{children:(e=>{switch(e){case"google-us":return(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(p.JM8,{className:"h-4 w-4 shrink-0"}),(0,i.jsx)("span",{children:"Google Dictionary - US"})]});case"google-uk":return(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(p.JM8,{className:"h-4 w-4 shrink-0"}),(0,i.jsx)("span",{children:"Google Dictionary - GB"})]});case"custom":return(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(u.Z,{className:"h-4 w-4 shrink-0"}),(0,i.jsx)("span",{children:"Custom Audio File"})]})}})(E)})}),(0,i.jsxs)(w.Bw,{children:[(0,i.jsx)(w.Ql,{value:"google-us",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(p.JM8,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"Google Dictionary - US"})]})}),(0,i.jsx)(w.Ql,{value:"google-uk",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(p.JM8,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"Google Dictionary - GB"})]})}),(0,i.jsx)(w.Ql,{value:"custom",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(u.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"Custom Audio"})]})})]})]}),"custom"===E?(0,i.jsx)("div",{className:"flex flex-col gap-2",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(o.I,{type:"file",accept:"audio/*",onChange:handleCustomAudioChange,className:"hidden",id:"audio-file-input",disabled:c||L}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)(n.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=document.getElementById("audio-file-input"))||void 0===e?void 0:e.click()},disabled:c||L,className:"gradio-button h-8 text-xs flex-1",children:L?(0,i.jsxs)(r.E.div,{className:"flex items-center gap-2",animate:{opacity:[.5,1]},transition:{duration:.8,repeat:1/0,ease:"easeInOut"},children:[(0,i.jsx)(m.Z,{className:"h-3 w-3 animate-spin"}),(0,i.jsx)("span",{children:"Processing..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{className:"h-3 w-3 mr-2"}),(0,i.jsx)("span",{children:"Choose Audio File"})]})})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Upload a custom audio file (MP3, WAV)"})})]}),D&&(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)(n.z,{type:"button",variant:"outline",size:"icon",onClick:()=>{Z(void 0),_(null);let e=document.getElementById("audio-file-input");e&&(e.value="")},disabled:c,className:"gradio-button h-8 w-8",children:(0,i.jsx)(h.Z,{className:"h-4 w-4"})})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Remove selected audio file"})})]})]}),D&&(0,i.jsxs)("p",{className:"mt-1.5 text-[11px] text-muted-foreground truncate",children:["Selected: ",D.name," (",(D.size/1024/1024).toFixed(2),"MB)"]})]})}):(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)(n.z,{type:"button",variant:"outline",size:"sm",onClick:handleFetchAudio,disabled:c||!k||L,className:"gradio-button h-8 text-xs flex-1",children:L?(0,i.jsxs)(r.E.div,{className:"flex items-center gap-2",animate:{opacity:[.5,1]},transition:{duration:.8,repeat:1/0,ease:"easeInOut"},children:[(0,i.jsx)(m.Z,{className:"h-3 w-3 animate-spin"}),(0,i.jsx)("span",{children:"Fetching Audio..."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Z,{className:"h-3 w-3 mr-2"}),(0,i.jsx)("span",{children:"Fetch Audio"})]})})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Fetch pronunciation from Google Dictionary"})})]})}),B&&(0,i.jsxs)("div",{className:"rounded-md border bg-card p-2 space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"text-xs font-medium truncate",children:"Audio Preview"}),(0,i.jsx)("p",{className:"text-[11px] text-muted-foreground truncate",children:"custom"===B.source?"Custom audio file":"".concat("google-us"===B.source?"US":"GB"," pronunciation")})]}),(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)(n.z,{type:"button",variant:"ghost",size:"icon",onClick:handlePlayPreview,disabled:M,className:"h-7 w-7 shrink-0",children:M?(0,i.jsx)(r.E.div,{animate:{scale:[1,.9,1]},transition:{duration:1,repeat:1/0},children:(0,i.jsx)(m.Z,{className:"h-3 w-3 animate-spin"})}):(0,i.jsx)(x.Z,{className:"h-3 w-3"})})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Preview audio"})})]})]}),(0,i.jsx)("div",{ref:I,className:"w-full"})]})]})]}),(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsxs)(n.z,{type:"submit",className:"w-full gradio-button bg-primary hover:bg-primary/90",disabled:c||!k||!F||!B,children:[(0,i.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Add Card"]})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Add word to your spelling bee deck"})})]})]})},"single")})]})})}},3217:function(e,a,s){s.d(a,{C:function(){return CardList}});var i=s(4246),t=s(7378),r=s(9353),n=s(2609),o=s(2685),l=s(9868),d=s(2923),c=s(2430),u=s(7413);let m=(0,c.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:a,variant:s,...t}=e;return(0,i.jsx)("div",{className:(0,u.cn)(m({variant:s}),a),...t})}var h=s(8504),x=s(6013),f=s(876),p=s(2222),j=s(1374),g=s(7311),v=s(5289),N=s(1038),y=s(4356),w=s(946),b=s(4348),A=s(1503),C=s(4236);function EditCardDialog(e){let{card:a,isOpen:s,onClose:o,onSave:d,isLoading:c,autoLowercase:u}=e,[m,h]=(0,t.useState)(a.word),[p,g]=(0,t.useState)(a.definition||""),[k,S]=(0,t.useState)(a.audioSource||"none"),[F,z]=(0,t.useState)(),[D,Z]=(0,t.useState)(a.audioData),[E,P]=(0,t.useState)(!1),[B,_]=(0,t.useState)(!1),R=t.useRef(null),J=t.useMemo(()=>"edit-card-dialog",[]);t.useEffect(()=>{D&&R.current&&(0,v.dr)(D,R.current,J).catch(console.error)},[D,J]);let handleFetchAudio=async()=>{if(!m.trim()){N.Am.error("Please enter a word first");return}P(!0);let e=!0===u?m.toLowerCase():m;try{if("custom"===k){if(!F){N.Am.error("Please select an audio file first");return}let e=await F.arrayBuffer();Z(e),R.current&&await (0,v.dr)(e,R.current,J),N.Am.success("Audio updated successfully")}else if("google-us"===k||"google-uk"===k){let a="google-us"===k?"us":"gb",s="fetch-audio-".concat(Date.now());try{N.Am.loading("Fetching ".concat(a.toUpperCase()," pronunciation..."),{id:s});let i=await (0,v.R$)(e,a,s);i&&(Z(i),R.current&&await (0,v.dr)(i,R.current,J))}catch(e){console.error("Error in handleFetchAudio:",e)}}}catch(e){console.error("Error in handleFetchAudio:",e)}finally{P(!1)}},handlePlayAudio=async()=>{if(D)try{_(!0),await (0,v.Sk)(J)}catch(e){N.Am.error("Failed to play audio")}finally{_(!1)}};return(0,i.jsx)(C.pn,{children:(0,i.jsx)(y.Vq,{open:s,onOpenChange:o,children:(0,i.jsxs)(y.cZ,{className:"sm:max-w-[425px]",children:[(0,i.jsx)(y.fK,{children:(0,i.jsx)(y.$N,{children:"Edit Card"})}),(0,i.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)("label",{className:"text-sm font-medium",children:"Word"})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"The word to be added to your spelling bee deck"})})]}),(0,i.jsx)(r.I,{value:m,onChange:e=>h(e.target.value),className:"h-9",disabled:c})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)("label",{className:"text-sm font-medium",children:"Definition"})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"The meaning or explanation of the word"})})]}),(0,i.jsx)(w.g,{value:p,onChange:e=>g(e.target.value),className:"min-h-[100px]",disabled:c})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)("label",{className:"text-sm font-medium",children:"Audio Source"})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Choose between Google Dictionary (US/GB) or custom audio"})})]}),(0,i.jsxs)(n.Ph,{value:k,onValueChange:e=>{S(e),"custom"!==e&&z(void 0)},disabled:c,children:[(0,i.jsx)(n.i4,{className:"h-9",children:(0,i.jsx)(n.ki,{})}),(0,i.jsxs)(n.Bw,{children:[(0,i.jsx)(n.Ql,{value:"none",children:"No Audio"}),(0,i.jsx)(n.Ql,{value:"google-us",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(A.JM8,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"Google Dictionary - US"})]})}),(0,i.jsx)(n.Ql,{value:"google-uk",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(A.JM8,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"Google Dictionary - GB"})]})}),(0,i.jsx)(n.Ql,{value:"custom",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(b.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:"Custom Audio"})]})})]})]}),"none"!==k&&(0,i.jsxs)("div",{className:"pt-2 space-y-2",children:["custom"===k?(0,i.jsx)("div",{className:"flex flex-col gap-2",children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(r.I,{type:"file",accept:"audio/*",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];s&&z(s)},className:"hidden",id:"edit-audio-file-input",disabled:c||E}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsxs)(l.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=document.getElementById("edit-audio-file-input"))||void 0===e?void 0:e.click()},disabled:c||E,className:"flex-1",children:[E?(0,i.jsx)(x.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,i.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Select Audio File"]})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Upload a custom audio file (MP3, WAV)"})})]}),F&&(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)(l.z,{type:"button",variant:"outline",size:"icon",onClick:()=>{z(void 0),Z(void 0);let e=document.getElementById("edit-audio-file-input");e&&(e.value="")},disabled:c,className:"h-9 w-9",children:(0,i.jsx)(j.Z,{className:"h-4 w-4"})})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Remove selected audio file"})})]})]}),F&&(0,i.jsxs)("p",{className:"mt-1.5 text-[11px] text-muted-foreground truncate",children:["Selected: ",F.name," (",(F.size/1024/1024).toFixed(2),"MB)"]})]})}):(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsxs)(l.z,{type:"button",variant:"outline",size:"sm",onClick:handleFetchAudio,disabled:c||!m||E,className:"flex-1",children:[E?(0,i.jsx)(x.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,i.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Fetch Audio"]})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Fetch pronunciation from Google Dictionary"})})]})}),D&&(0,i.jsxs)("div",{className:"rounded-md border bg-card p-2 space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsx)("p",{className:"text-xs font-medium truncate",children:"Audio Preview"}),(0,i.jsx)("p",{className:"text-[11px] text-muted-foreground truncate",children:"custom"===k?F?"".concat(F.name," (").concat((F.size/1024/1024).toFixed(2),"MB)"):"Custom audio file":"".concat("google-us"===k?"US":"GB"," pronunciation")})]})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Preview the current audio for this word"})})]}),(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)(l.z,{type:"button",variant:"ghost",size:"icon",onClick:handlePlayAudio,disabled:B,className:"h-7 w-7",children:B?(0,i.jsx)(x.Z,{className:"h-3 w-3 animate-spin"}):(0,i.jsx)(f.Z,{className:"h-3 w-3"})})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Play audio preview"})})]})]}),(0,i.jsx)("div",{ref:R,className:"w-full"})]})]})]})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,i.jsx)(l.z,{variant:"outline",onClick:o,children:"Cancel"}),(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsx)(l.z,{onClick:()=>{if(!m.trim()){N.Am.error("Word is required");return}d({...a,word:!0===u?m.toLowerCase():m,definition:(null==p?void 0:p.trim())||"",audioData:D,audioSource:k}),o()},disabled:c||!m.trim(),children:"Save Changes"})}),(0,i.jsx)(C._v,{children:(0,i.jsx)("p",{children:"Save changes to this card"})})]})]})]})})})}function CollapsibleCard(e){let{card:a,onRemove:s,onPlayAudio:r,onEdit:n,isLoading:c,autoLowercase:m}=e,[y,w]=(0,t.useState)(!1),[b,A]=(0,t.useState)(!1),[k,S]=(0,t.useState)(!1),F=t.useRef(null),z=t.useMemo(()=>"card-".concat(a.id),[a.id]);(0,t.useEffect)(()=>{let e=!0;return a.audioData&&F.current&&(0,v.dr)(a.audioData,F.current,z).catch(a=>{e&&(console.error("Failed to load waveform:",a),N.Am.error("Failed to load audio preview"))}),()=>{e=!1;let a=v.Qj.get(z);a&&(a.destroy(),v.Qj.delete(z))}},[a.audioData,z]);let handlePlayAudio=async e=>{if(e.stopPropagation(),a.audioData)try{A(!0),await (0,v.Sk)(z),A(!1)}catch(e){A(!1),N.Am.error("Failed to play audio")}};return(0,i.jsxs)(C.pn,{children:[(0,i.jsxs)(C.u,{children:[(0,i.jsx)(C.aJ,{asChild:!0,children:(0,i.jsxs)(d.Zb,{className:(0,u.cn)("gradio-card group hover:shadow-md transition-all duration-200",(!a.definition||!a.audioData)&&"border-dashed"),children:[(0,i.jsx)("div",{onClick:()=>w(!y),className:"cursor-pointer",children:(0,i.jsxs)("div",{className:"px-3 py-2 flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"flex-1 flex items-center min-w-0",children:[(0,i.jsx)(h.Z,{className:"h-3 w-3 mr-2 text-muted-foreground/50 transition-transform duration-200 ".concat(y?"rotate-90":"")}),(0,i.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("h3",{className:"text-sm font-medium truncate",children:a.word}),(0,i.jsxs)("div",{className:"flex gap-1",children:[!a.definition&&(0,i.jsx)(Badge,{variant:"outline",className:"h-4 px-1 text-[10px] border-amber-500/20 text-amber-500 bg-amber-500/10",children:"No Definition"}),!a.audioData&&(0,i.jsx)(Badge,{variant:"outline",className:"h-4 px-1 text-[10px] border-violet-500/20 text-violet-500 bg-violet-500/10",children:"No Audio"})]})]}),!y&&a.definition&&(0,i.jsx)("p",{className:"text-[11px] text-muted-foreground truncate mt-0.5",children:a.definition})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-1 shrink-0",children:[!y&&a.audioData&&(0,i.jsx)(l.z,{variant:"ghost",size:"sm",onClick:handlePlayAudio,disabled:c||b,className:"h-6 w-6 p-0 hover:bg-primary/5 hover:text-primary",children:b?(0,i.jsx)(x.Z,{className:"h-3 w-3 animate-spin"}):(0,i.jsx)(f.Z,{className:"h-3 w-3"})}),(0,i.jsx)(l.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),S(!0)},disabled:c,className:"h-6 w-6 p-0 hover:bg-primary/5 hover:text-primary",children:(0,i.jsx)(p.Z,{className:"h-3 w-3"})}),(0,i.jsx)(l.z,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),s()},disabled:c,className:"h-6 w-6 p-0 hover:bg-destructive/5 hover:text-destructive",children:(0,i.jsx)(j.Z,{className:"h-3 w-3"})})]})]})}),(0,i.jsx)(o.E.div,{initial:!1,animate:{height:y?"auto":0,opacity:y?1:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden border-t border-border/50",children:(0,i.jsxs)("div",{className:"px-3 py-2 space-y-2",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("div",{className:"text-[11px] font-medium text-muted-foreground",children:"Definition"}),a.definition?(0,i.jsx)("p",{className:"text-xs leading-normal whitespace-pre-line",children:a.definition}):(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs text-amber-500",children:[(0,i.jsx)(g.Z,{className:"h-3 w-3"}),(0,i.jsx)("span",{children:"No definition available"})]})]}),a.audioData&&(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"text-[11px] font-medium text-muted-foreground",children:"us"===a.audioRegion?"US Pronunciation":"gb"===a.audioRegion?"GB Pronunciation":"Custom Audio"}),(0,i.jsx)(l.z,{variant:"ghost",size:"sm",onClick:handlePlayAudio,disabled:c||b,className:"h-6 w-6 p-0 hover:bg-primary/5 hover:text-primary",children:b?(0,i.jsx)(x.Z,{className:"h-3 w-3 animate-spin"}):(0,i.jsx)(f.Z,{className:"h-3 w-3"})})]}),(0,i.jsx)("div",{ref:F,className:"w-full ".concat(y?"block":"hidden")})]})]})})]})}),(0,i.jsx)(C._v,{side:"left",className:"max-w-[300px]",children:(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium",children:a.word}),a.definition&&(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:a.definition})]}),a.audioData&&(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:["us"===a.audioRegion?"US Pronunciation":"gb"===a.audioRegion?"GB Pronunciation":"Custom Audio"," available"]})]})})]}),(0,i.jsx)(EditCardDialog,{card:a,isOpen:k,onClose:()=>S(!1),onSave:n,isLoading:c,autoLowercase:m})]})}var k=s(1378),S=s(5459),F=s(2581);function CardList(e){let{cards:a,onRemoveCard:s,onPlayAudio:l,onEditCard:d,isLoading:c,autoLowercase:u}=e,[m,h]=(0,t.useState)(""),[x,f]=(0,t.useState)("newest"),[p,j]=(0,t.useState)("all"),g=(0,t.useMemo)(()=>{let e=[...a];switch(p){case"no-audio":e=e.filter(e=>!e.audioData);break;case"no-definition":e=e.filter(e=>!e.definition)}if(m){let a=m.toLowerCase();e=e.filter(e=>{var s,i;return e.word.toLowerCase().includes(a)||null!==(i=null===(s=e.definition)||void 0===s?void 0:s.toLowerCase().includes(a))&&void 0!==i&&i})}switch(x){case"newest":e.sort((e,a)=>Number(a.createdAt||0)-Number(e.createdAt||0));break;case"oldest":e.sort((e,a)=>Number(e.createdAt||0)-Number(a.createdAt||0));break;case"a-z":e.sort((e,a)=>e.word.localeCompare(a.word));break;case"z-a":e.sort((e,a)=>a.word.localeCompare(e.word))}return e},[a,m,x,p]),v=(0,t.useMemo)(()=>a.filter(e=>!e.audioData).length,[a]),N=(0,t.useMemo)(()=>a.filter(e=>!e.definition).length,[a]);return(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b p-0.5",children:(0,i.jsxs)("div",{className:"space-y-2 pb-2",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,i.jsxs)("div",{className:"relative flex-1",children:[(0,i.jsx)(k.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/50"}),(0,i.jsx)(r.I,{placeholder:"Search words or definitions...",value:m,onChange:e=>h(e.target.value),className:"pl-9 h-9"})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(n.Ph,{value:p,onValueChange:e=>j(e),children:[(0,i.jsx)(n.i4,{className:"w-[140px] h-9",children:(0,i.jsx)(n.ki,{placeholder:"Filter by"})}),(0,i.jsxs)(n.Bw,{children:[(0,i.jsx)(n.Ql,{value:"all",children:(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)("span",{children:"All Cards"})})}),(0,i.jsx)(n.Ql,{value:"no-audio",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(b.Z,{className:"h-3.5 w-3.5"}),(0,i.jsx)("span",{children:"No Audio"}),v>0&&(0,i.jsx)(Badge,{variant:"secondary",className:"ml-auto h-4 text-[10px]",children:v})]})}),(0,i.jsx)(n.Ql,{value:"no-definition",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(S.Z,{className:"h-3.5 w-3.5"}),(0,i.jsx)("span",{children:"No Definition"}),N>0&&(0,i.jsx)(Badge,{variant:"secondary",className:"ml-auto h-4 text-[10px]",children:N})]})})]})]}),(0,i.jsxs)(n.Ph,{value:x,onValueChange:e=>f(e),children:[(0,i.jsx)(n.i4,{className:"w-[140px] h-9",children:(0,i.jsx)(n.ki,{placeholder:"Sort by"})}),(0,i.jsxs)(n.Bw,{children:[(0,i.jsx)(n.Ql,{value:"newest",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(F.Z,{className:"h-3.5 w-3.5"}),(0,i.jsx)("span",{children:"Newest first"})]})}),(0,i.jsx)(n.Ql,{value:"oldest",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(F.Z,{className:"h-3.5 w-3.5"}),(0,i.jsx)("span",{children:"Oldest first"})]})}),(0,i.jsx)(n.Ql,{value:"a-z",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(F.Z,{className:"h-3.5 w-3.5"}),(0,i.jsx)("span",{children:"A to Z"})]})}),(0,i.jsx)(n.Ql,{value:"z-a",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(F.Z,{className:"h-3.5 w-3.5"}),(0,i.jsx)("span",{children:"Z to A"})]})})]})]})]})]}),(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:m||"all"!==p?(0,i.jsxs)("span",{children:["Found ",g.length," matching cards"]}):(0,i.jsxs)("span",{children:[a.length," total cards"]})})]})}),(0,i.jsxs)("div",{className:"pt-2 space-y-2",children:[g.map(e=>(0,i.jsx)(o.E.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{opacity:{duration:.2},layout:{duration:.2}},children:(0,i.jsx)(CollapsibleCard,{card:e,onRemove:()=>s(e.id),onPlayAudio:l,onEdit:d,isLoading:c,autoLowercase:u})},e.id)),0===g.length&&(0,i.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"text-center py-12",children:(0,i.jsx)("div",{className:"rounded-lg border border-dashed p-8 mx-auto max-w-md",children:(0,i.jsx)("p",{className:"text-muted-foreground",children:m?(0,i.jsxs)(i.Fragment,{children:['No cards match your search "',(0,i.jsx)("span",{className:"font-medium",children:m}),'"']}):"all"!==p?(0,i.jsxs)(i.Fragment,{children:["No cards found with ","no-audio"===p?"missing audio":"missing definition"]}):"No cards added yet"})})})]})]})}},2923:function(e,a,s){s.d(a,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},ll:function(){return l}});var i=s(4246),t=s(7378),r=s(7413);let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t})});n.displayName="Card";let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...t})});o.displayName="CardHeader";let l=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...t})});l.displayName="CardTitle";let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",s),...t})});d.displayName="CardDescription";let c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",s),...t})});c.displayName="CardContent";let u=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",s),...t})});u.displayName="CardFooter"},4356:function(e,a,s){s.d(a,{$N:function(){return h},Be:function(){return x},Vq:function(){return l},cN:function(){return DialogFooter},cZ:function(){return m},fK:function(){return DialogHeader},hg:function(){return d}});var i=s(4246),t=s(7378),r=s(5294),n=s(7324),o=s(7413);let l=r.fC,d=r.xz,c=r.h_;r.x8;let u=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(r.aV,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t})});u.displayName=r.aV.displayName;let m=t.forwardRef((e,a)=>{let{className:s,children:t,...l}=e;return(0,i.jsxs)(c,{children:[(0,i.jsx)(u,{}),(0,i.jsxs)(r.VY,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[t,(0,i.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(n.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.VY.displayName;let DialogHeader=e=>{let{className:a,...s}=e;return(0,i.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};DialogHeader.displayName="DialogHeader";let DialogFooter=e=>{let{className:a,...s}=e;return(0,i.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};DialogFooter.displayName="DialogFooter";let h=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(r.Dx,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",s),...t})});h.displayName=r.Dx.displayName;let x=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(r.dk,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",s),...t})});x.displayName=r.dk.displayName},9353:function(e,a,s){s.d(a,{I:function(){return n}});var i=s(4246),t=s(7378),r=s(7413);let n=t.forwardRef((e,a)=>{let{className:s,type:t,...n}=e;return(0,i.jsx)("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...n})});n.displayName="Input"},7002:function(e,a,s){s.d(a,{_:function(){return d}});var i=s(4246),t=s(7378),r=s(8166),n=s(2430),o=s(7413);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(r.f,{ref:a,className:(0,o.cn)(l(),s),...t})});d.displayName=r.f.displayName},2609:function(e,a,s){s.d(a,{Bw:function(){return m},Ph:function(){return d},Ql:function(){return x},i4:function(){return u},ki:function(){return c}});var i=s(4246),t=s(7378),r=s(2270),n=s(7631),o=s(8788),l=s(7413);let d=r.fC;r.ZA;let c=r.B4,u=t.forwardRef((e,a)=>{let{className:s,children:t,...o}=e;return(0,i.jsxs)(r.xz,{ref:a,className:(0,l.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...o,children:[t,(0,i.jsx)(r.JO,{asChild:!0,children:(0,i.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=r.xz.displayName;let m=t.forwardRef((e,a)=>{let{className:s,children:t,position:n="popper",...o}=e;return(0,i.jsx)(r.h_,{children:(0,i.jsx)(r.VY,{ref:a,className:(0,l.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...o,children:(0,i.jsx)(r.l_,{className:(0,l.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t})})})});m.displayName=r.VY.displayName;let h=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(r.__,{ref:a,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t})});h.displayName=r.__.displayName;let x=t.forwardRef((e,a)=>{let{className:s,children:t,...n}=e;return(0,i.jsxs)(r.ck,{ref:a,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(r.wU,{children:(0,i.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,i.jsx)(r.eT,{children:t})]})});x.displayName=r.ck.displayName;let f=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(r.Z0,{ref:a,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",s),...t})});f.displayName=r.Z0.displayName},3873:function(e,a,s){s.d(a,{r:function(){return o}});var i=s(4246),t=s(7378),r=s(3398),n=s(7413);let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)(r.fC,{className:(0,n.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:a,children:(0,i.jsx)(r.bU,{className:(0,n.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});o.displayName=r.fC.displayName},946:function(e,a,s){s.d(a,{g:function(){return n}});var i=s(4246),t=s(7378),r=s(7413);let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,i.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t})});n.displayName="Textarea"},4236:function(e,a,s){s.d(a,{_v:function(){return c},aJ:function(){return d},pn:function(){return o},u:function(){return l}});var i=s(4246),t=s(7378),r=s(2898),n=s(7413);let o=r.zt,l=r.fC,d=r.xz,c=t.forwardRef((e,a)=>{let{className:s,sideOffset:t=4,...o}=e;return(0,i.jsx)(r.VY,{ref:a,sideOffset:t,className:(0,n.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})});c.displayName=r.VY.displayName},5289:function(e,a,s){s.d(a,{Qj:function(){return r},R$:function(){return fetchAudio},Sk:function(){return playAudio},dr:function(){return loadAudioWaveform},sL:function(){return fetchWordDefinition}});var i=s(1038),t=s(1148);let r=new Map;async function fetchWordDefinition(e,a){let s=e.trim().toLowerCase();if(!s)return null;try{let e=await window.electron.fetchWordDefinition(s);if(!e){let e="Hmm, I couldn't find \"".concat(s,'" in the dictionary. Please check the spelling and try again.');return a?i.Am.error(e,{id:a}):i.Am.error(e),null}return e}catch(t){console.error("Error in fetchWordDefinition:",t);let e="Hmm, I couldn't find \"".concat(s,'" in the dictionary. Please check the spelling and try again.');return a?i.Am.error(e,{id:a}):i.Am.error(e),null}}async function fetchAudio(e,a,s){try{let t=await window.electron.fetchAudio(e,a);if(!t){let t="Sorry, I couldn't find the ".concat("us"===a?"American":"British",' pronunciation for "').concat(e,'". Would you like to try ').concat("us"===a?"British":"American"," English instead?");return s?i.Am.error(t,{id:s}):i.Am.error(t),null}return s&&i.Am.success("Found ".concat("us"===a?"American":"British",' pronunciation for "').concat(e,'"'),{id:s}),new Uint8Array(Object.values(t)).buffer}catch(r){console.error("Error in fetchAudio:",r);let t="Sorry, I couldn't find the ".concat("us"===a?"American":"British",' pronunciation for "').concat(e,'". Would you like to try ').concat("us"===a?"British":"American"," English instead?");return s?i.Am.error(t,{id:s}):i.Am.error(t),null}}async function loadAudioWaveform(e,a,s){try{let n=function(e,a){if(r.has(a)){var s;null===(s=r.get(a))||void 0===s||s.destroy()}let n=t.Z.create({container:e,waveColor:"rgb(124, 58, 237)",progressColor:"rgb(139, 92, 246)",height:32,cursorWidth:1,cursorColor:"#4c1d95",backend:"WebAudio",normalize:!0,interact:!0,minPxPerSec:50,hideScrollbar:!0,barWidth:2,barGap:1,barRadius:2});return n.on("error",e=>{console.error("WaveSurfer error:",e),i.Am.error("Error loading audio")}),n.on("ready",()=>{console.log("WaveSurfer ready")}),n.on("finish",()=>{console.log("WaveSurfer finished")}),r.set(a,n),n}(a,s),o=new Blob([e],{type:"audio/mp3"});await new Promise((e,a)=>{let onReady=()=>{n.un("ready",onReady),n.un("error",onError),e()},onError=e=>{n.un("ready",onReady),n.un("error",onError),a(e)};n.on("ready",onReady),n.on("error",onError),n.loadBlob(o)})}catch(e){throw console.error("Error loading audio waveform:",e),e}}async function playAudio(e){try{let a=r.get(e);if(!a)throw Error("No audio loaded");await a.play()}catch(e){throw console.error("Error playing audio:",e),i.Am.error("Failed to play audio",{description:e instanceof Error?e.message:"Unknown error occurred"}),e}}}}]);